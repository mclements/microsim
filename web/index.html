<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Microsimulation</title>
		<link rel="stylesheet" type="text/css" href="style.css"/>
		<script type="text/javascript" src="lib/tempo.min.js"></script>
		<script type="text/javascript" src="lib/d3.v2.min.js"></script>
		<script type="text/javascript" src="lib/nv.d3.min.js"></script>
		<script type="text/javascript" src="lib/microsim.js"></script>
		<script type="text/javascript" src="script.js"></script>
		<link href="lib/nv.d3.css" rel="stylesheet" type="text/css"/>
		<style>
		  #chart svg {
		  height: 400px;
		  width: 800px;
		  }
		</style>
	</head>
	<body>
		<noscript>
			<p><strong class="error">This client-side application requires a Javascript enabled browser</strong></p>
		</noscript>

		<h1>Microsimulation</h1>

		<p>Move a population of <var>N</var> individuals through a set of <var>M</var> states from healthy to dead, and for each state, record the number of visits per age.</p>

		<form id="input" action="">
			<p><label for="population-size">Population size:</label> <input id="population-size" name="population-size" value="1000" /> <input type="submit" value="Run"/> <span id="preloader" class="discrete" style="margin-left: 1em; font-style: italic"><span data-template="data-template">{{[0]}}</span></span></p>
		</form>
		
		<div id="output">
			<table id="summary">
				<tr>
					<th align="left" class="first">State</th>
					<th align="left">Probability</th>
					<th align="left" class="last">Mean age</th>
				</tr>
				<tr data-template="data-template">
					<td align="left" class="first">{{state}}</td>
					<td align="right">{{freq | format 2}}</td>
					<td align="right" class="last">{{meanAge | format 2}}</td>
				</tr>
			</table>
			
			<div style="text-align: center; margin: 2em 0">
				<p id="chart-title" class="discrete"><em data-template="data-template">{{[0]}}</em></p>
			
			<div id="chart"> 
			  <svg></svg> 
			</div>
			
			<div id="execution-time" class="discrete">
				<p data-template="data-template">Execution time: {{[0] | format 1}} seconds</p>
			</div>			
		</div>

		<div id="error" class="error">
			<p data-template="data-template">Invalid input: &quot;{{[0]}}&quot;</p>
		</div>
	</body>
</html>
